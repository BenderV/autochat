interactions:
- request:
    body: '{"max_tokens": 2000, "messages": [{"role": "user", "content": [{"type":
      "text", "text": "Hello, read book ''the great gatsby''", "cache_control": {"type":
      "ephemeral"}}]}], "model": "claude-3-5-sonnet-20240620", "system": [{"type":
      "text", "text": "You are a helpful assistant that can read books.", "cache_control":
      {"type": "ephemeral"}}], "tools": [{"name": "list_books", "description": "No
      description provided", "input_schema": {"properties": {}, "title": "Input for
      `list_books`", "type": "object"}}, {"name": "read_book", "description": "No
      description provided", "input_schema": {"properties": {"book_name": {"title":
      "Book Name", "type": "string"}}, "required": ["book_name"], "title": "Input
      for `read_book`", "type": "object"}, "cache_control": {"type": "ephemeral"}}]}'
    headers:
      anthropic-beta:
      - prompt-caching-2024-07-31
      anthropic-version:
      - '2023-06-01'
      content-type:
      - application/json
      host:
      - api.anthropic.com
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2RRXW/bMAz8Kyxf+qIUTpoUqF+7ImnRl2HJgGEdVMVmYrey6JlUVy/wfx/kfmNP
        Anl3uiN5wLrEHBvZ22y62Nx81S+ra1o+1T8urr9HftytBA1q31JikYjbExrs2KeGE6lFXVA02HBJ
        HnMsvIslTU4ni4lwCKSTWTabZ2ezDA0WHJSCYv7z8Pqp0lOSj0+OF9Spq4Pvj+DquIQtQeXatgdl
        6MiVcIvrimDZkVNYOpVtf4uw4w56jiewZigZtKrFwNWx9xCFQCuCuyS2W+aHO9jFUGjN4QRuSKEh
        6Ei7mh6fmS8JBXg31knzZoCDec/N7G2UtI1xhamONpue/T1dnK9oc74O3zb32z/V5WrT3KPB4Jqk
        e0uShKGNivkBU21fCMl1Pw64HwfEYfhlUJRb25ETDp/NR0Dod6RQEOYhem8wjnfKD88OVvmBgmA+
        ny8MFq6oyBbJoeZgPzOyV3yM+R/GUT92ptlsGP4BAAD//wMAYKQvwkMCAAA=
    headers:
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      request-id:
      - req_01UJKEDtWbazn1CREm54qfG7
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 2000, "messages": [{"role": "user", "content": [{"type":
      "text", "text": "Hello, read book ''the great gatsby''", "cache_control": {"type":
      "ephemeral"}}]}, {"role": "assistant", "content": [{"type": "text", "text":
      "Certainly! I''d be happy to read \"The Great Gatsby\" for you. To do this,
      I''ll use the `read_book` function. Let me retrieve the contents of the book
      for you."}, {"type": "tool_use", "id": "toolu_016z359HeU9TnSUjbwhEHUmj", "name":
      "read_book", "input": {"book_name": "the great gatsby"}}]}, {"role": "user",
      "content": [{"type": "tool_result", "tool_use_id": "toolu_016z359HeU9TnSUjbwhEHUmj",
      "content": "Traceback (most recent call last):\n  File \"/Users/smileos/Workspaces/autochat/tests/test_calls.py\",
      line 17, in read_book\n    return BOOKS[book_name]\n           ~~~~~^^^^^^^^^^^\n\nKeyError:
      ''the great gatsby''"}]}], "model": "claude-3-5-sonnet-20240620", "system":
      [{"type": "text", "text": "You are a helpful assistant that can read books.",
      "cache_control": {"type": "ephemeral"}}], "tools": [{"name": "list_books", "description":
      "No description provided", "input_schema": {"properties": {}, "title": "Input
      for `list_books`", "type": "object"}}, {"name": "read_book", "description":
      "No description provided", "input_schema": {"properties": {"book_name": {"title":
      "Book Name", "type": "string"}}, "required": ["book_name"], "title": "Input
      for `read_book`", "type": "object"}, "cache_control": {"type": "ephemeral"}}]}'
    headers:
      anthropic-beta:
      - prompt-caching-2024-07-31
      anthropic-version:
      - '2023-06-01'
      content-type:
      - application/json
      host:
      - api.anthropic.com
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA2SRQWvbQBCF/8owZ9nIqusWHQux67Q5JAQaaIqyXo2lxasddWc2tWv034uUhCT0
        NMy89z7Yt2d0NZbYSVPli+WXpV5f6le9OC762Nytb4536yvMUE89jS4SMQ1hhpH9eDAiTtQExQw7
        rsljidabVNPsw+zjTDgE0lmRF8t8VeSYoeWgFBTLn+cXqNJxjE+jxC2Ynj037i/BniNoS0AxcpzD
        VkGIOgFtjU7CjvkA93jbEmwiGYWNUdmd7hGcQGAF82icNztP4MKUsClGCgre7aKJJ+D9BHlmbsGa
        AMZaEpnDd1LoCGxL9gB/Rv3JaiK9ASdxoZnYD96JVpPnAfYpWHUc5jhkr09l9lWSscCp9XFPVb7Y
        3G6uL9vH9XFVfzvdXC37H8UFWcwwmG7MvYLHZOiTYnkehl8ZinJfRTLC4T1/EoR+JwqWsAzJ+wzT
        9Hvl+YlRKR8oCJar4lOG1tiWKjvW6DhU7x35ix7J1P9rnPTt5fNqGP4BAAD//wMA9543ylgCAAA=
    headers:
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      request-id:
      - req_01EqgVKrKb6JFQFhjoc84kfq
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 2000, "messages": [{"role": "user", "content": [{"type":
      "text", "text": "Hello, read book ''the great gatsby''", "cache_control": {"type":
      "ephemeral"}}]}, {"role": "assistant", "content": [{"type": "text", "text":
      "Certainly! I''d be happy to read \"The Great Gatsby\" for you. To do this,
      I''ll use the `read_book` function. Let me retrieve the contents of the book
      for you."}, {"type": "tool_use", "id": "toolu_016z359HeU9TnSUjbwhEHUmj", "name":
      "read_book", "input": {"book_name": "the great gatsby"}}]}, {"role": "user",
      "content": [{"type": "tool_result", "tool_use_id": "toolu_016z359HeU9TnSUjbwhEHUmj",
      "content": "Traceback (most recent call last):\n  File \"/Users/smileos/Workspaces/autochat/tests/test_calls.py\",
      line 17, in read_book\n    return BOOKS[book_name]\n           ~~~~~^^^^^^^^^^^\n\nKeyError:
      ''the great gatsby''"}]}, {"role": "assistant", "content": [{"type": "text",
      "text": "I apologize for the error. It seems that the book \"The Great Gatsby\"
      is not available in the current library of books that I can access. Let me check
      what books are available using the `list_books` function."}, {"type": "tool_use",
      "id": "toolu_01GTGQJhvFx6dKyRM4pW2Eec", "name": "list_books", "input": {}}]},
      {"role": "user", "content": [{"type": "tool_result", "tool_use_id": "toolu_01GTGQJhvFx6dKyRM4pW2Eec",
      "content": "The Great Gatsby\nTo Kill a Mockingbird\n1984"}]}], "model": "claude-3-5-sonnet-20240620",
      "system": [{"type": "text", "text": "You are a helpful assistant that can read
      books.", "cache_control": {"type": "ephemeral"}}], "tools": [{"name": "list_books",
      "description": "No description provided", "input_schema": {"properties": {},
      "title": "Input for `list_books`", "type": "object"}}, {"name": "read_book",
      "description": "No description provided", "input_schema": {"properties": {"book_name":
      {"title": "Book Name", "type": "string"}}, "required": ["book_name"], "title":
      "Input for `read_book`", "type": "object"}, "cache_control": {"type": "ephemeral"}}]}'
    headers:
      anthropic-beta:
      - prompt-caching-2024-07-31
      anthropic-version:
      - '2023-06-01'
      content-type:
      - application/json
      host:
      - api.anthropic.com
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//ZFFfb9NADP8qlp/TKu1WYHlEG2USDxMgYDAUuRc3PXo9h9i30lb57tOF
        TTB4Otm/f7bvhL7BCnfa1uXs9eXVbkHxy+WHG/26v/101LeHHwss0A4dZxarUstYYC8hN0jVq1E0
        LHAnDQes0AVKDU/OJouJSoxsk3k5Py9fzEss0Ek0jobVt9OTqfGvLB+fCq+BOgnS+iPDWnqwDYOT
        uE7qJQJTHzz3U7g2CCJbheC3DHf4ccOw7JkMlmS6OtwheAUfG+YG6J58oFXgAlbJRst1is6yo1dw
        pDxRjurN3/MU3rHBjsH6A/RMjY/tKFmJbIFa8hH23jaPk/U9OwNHnTcK/kjZdIpD8Wc9kVAnzUcb
        L53rVJez99LO3tx07asLauL5evnZH6/2t1hgpF3W5eg6Z2Zh7JJhdcJc14+Ef1fGYfheoJp0dc+k
        Ep+Hj4Dyz8TRMVYxhVBgGr+zOv1OqE22HBWrl2cXBTpyG65dTvAS6+eM8gkfx/wPk2R/d2blfBge
        AAAA//8DAFFZn59qAgAA
    headers:
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      request-id:
      - req_01AoSqhiPt8SsJZ9Cr1bsHa6
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
- request:
    body: '{"max_tokens": 2000, "messages": [{"role": "user", "content": [{"type":
      "text", "text": "Hello, read book ''the great gatsby''", "cache_control": {"type":
      "ephemeral"}}]}, {"role": "assistant", "content": [{"type": "text", "text":
      "Certainly! I''d be happy to read \"The Great Gatsby\" for you. To do this,
      I''ll use the `read_book` function. Let me retrieve the contents of the book
      for you."}, {"type": "tool_use", "id": "toolu_016z359HeU9TnSUjbwhEHUmj", "name":
      "read_book", "input": {"book_name": "the great gatsby"}}]}, {"role": "user",
      "content": [{"type": "tool_result", "tool_use_id": "toolu_016z359HeU9TnSUjbwhEHUmj",
      "content": "Traceback (most recent call last):\n  File \"/Users/smileos/Workspaces/autochat/tests/test_calls.py\",
      line 17, in read_book\n    return BOOKS[book_name]\n           ~~~~~^^^^^^^^^^^\n\nKeyError:
      ''the great gatsby''"}]}, {"role": "assistant", "content": [{"type": "text",
      "text": "I apologize for the error. It seems that the book \"The Great Gatsby\"
      is not available in the current library of books that I can access. Let me check
      what books are available using the `list_books` function."}, {"type": "tool_use",
      "id": "toolu_01GTGQJhvFx6dKyRM4pW2Eec", "name": "list_books", "input": {}}]},
      {"role": "user", "content": [{"type": "tool_result", "tool_use_id": "toolu_01GTGQJhvFx6dKyRM4pW2Eec",
      "content": "The Great Gatsby\nTo Kill a Mockingbird\n1984"}]}, {"role": "assistant",
      "content": [{"type": "text", "text": "I apologize for the confusion earlier.
      It looks like \"The Great Gatsby\" is indeed available, but the function is
      case-sensitive. Let me try reading the book again with the correct capitalization."},
      {"type": "tool_use", "id": "toolu_01Rog1FPpg89adn4fGWizEwY", "name": "read_book",
      "input": {"book_name": "The Great Gatsby"}}]}, {"role": "user", "content": [{"type":
      "tool_result", "tool_use_id": "toolu_01Rog1FPpg89adn4fGWizEwY", "content": "Lorem
      ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt
      ut labore et dolore magna aliqua."}]}], "model": "claude-3-5-sonnet-20240620",
      "system": [{"type": "text", "text": "You are a helpful assistant that can read
      books.", "cache_control": {"type": "ephemeral"}}], "tools": [{"name": "list_books",
      "description": "No description provided", "input_schema": {"properties": {},
      "title": "Input for `list_books`", "type": "object"}}, {"name": "read_book",
      "description": "No description provided", "input_schema": {"properties": {"book_name":
      {"title": "Book Name", "type": "string"}}, "required": ["book_name"], "title":
      "Input for `read_book`", "type": "object"}, "cache_control": {"type": "ephemeral"}}]}'
    headers:
      anthropic-beta:
      - prompt-caching-2024-07-31
      anthropic-version:
      - '2023-06-01'
      content-type:
      - application/json
      host:
      - api.anthropic.com
    method: POST
    uri: https://api.anthropic.com/v1/messages
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//fFNtixw3DP4rwl/6ZW7ZXNI0nS+lhXI9CKUvgUuTLYvW1s6Ita2JJe92
        ctx/D57JwZWEfBrGkp8X6fG94+B6l3TYb5/98zy9u7vc/H7iP88vfr78Sm9P9a/Rdc7miVoXqeJA
        rnNFYjtAVVbDbK5zSQJF1zsfsQa6en71/ZVKzmRX19vrF9uX11vXOS/ZKJvr398/ghr9164vn97d
        wohnAq3ek+qxxjhDIStMZwpgI8FnCJAj7NybkeCmEBrcoOlh3jk4SoFZ6gZ+kwudqXTABjhNhEXB
        RrQFBb1VjNBYG1I7OoicgBWyGOAZOeIhUgeYA3BWIwwdXGjVV8gTN0UIU0RPo8RAZYXjDK/ROG/g
        zcjaECOfKM4QKoEJeJnmwsNoUEitsDeWrCAFIic2XH85r25rKc2tzmqUNru8y83zF6RWMGtEIwWT
        HnbutRRKwJPWBEGiFNA2h0TWtREqeSOrBTDwxOo5D0CRbQN/U4AgQFw1SQCjNEkBzp4Dh5oNqkHE
        gxQCshWaIOGQETDyh4qbnYO7kf0IReowxhkSYdYm6g/kDGxK8bjMRc7ULTZTK6hJwYEevcIvddnV
        3OTwMlfjRB0cMcaml7MJqCSCYYnA1EDauhZ5m51r07oFnCTKwB9p3f4teMxtx1ORMwdqYYEL2/g0
        F98MWTN4e2z3vgvLbrsVFIxiXODwIKv2NVRSWnCWjtLijKHJxyw2UllbjkXSKuAxeRBZbQN3UmNY
        QBtTy88pywVSm/pK89VXIGXhesrxk3v4t3NqMu0LoUp2vaMc9lZLdp8LSh8qZU+uzzXGztXlvff3
        jvNUbW9yoqyuf/XqZec8+pH2vvGy5P3/O7aP9eb2y5pUe3ry7McfHh4+AQAA//8DAKKqupSLBAAA
    headers:
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      X-Robots-Tag:
      - none
      request-id:
      - req_013m8R5FJDhpdFzsMgn446S9
      via:
      - 1.1 google
    status:
      code: 200
      message: OK
version: 1
