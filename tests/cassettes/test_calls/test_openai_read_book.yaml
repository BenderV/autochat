interactions:
- request:
    body: '{"messages": [{"role": "system", "content": [{"type": "text", "text": "You
      are a helpful assistant that can read books."}]}, {"role": "user", "content":
      [{"type": "text", "text": "Hello, read book ''the great gatsby''"}]}, {"role":
      "assistant", "content": [{"type": "text", "text": "Certainly! I''d be happy
      to read \"The Great Gatsby\" for you. To do this, I''ll use the `read_book`
      function. Let me retrieve the contents of the book for you."}], "function_call":
      {"name": "read_book", "arguments": "{\"book_name\": \"the great gatsby\"}"}},
      {"role": "function", "content": [{"type": "text", "text": "Traceback (most recent
      call last):\n  File \"/Users/smileos/Workspaces/autochat/tests/test_calls.py\",
      line 17, in read_book\n    return BOOKS[book_name]\n           ~~~~~^^^^^^^^^^^\n\nKeyError:
      ''the great gatsby''"}], "name": "read_book"}, {"role": "assistant", "content":
      [{"type": "text", "text": "I apologize for the error. It seems that the book
      \"The Great Gatsby\" is not available in the current library of books that I
      can access. Let me check what books are available using the `list_books` function."}],
      "function_call": {"name": "list_books", "arguments": "{}"}}, {"role": "function",
      "content": [{"type": "text", "text": "The Great Gatsby\nTo Kill a Mockingbird\n1984"}],
      "name": "list_books"}, {"role": "assistant", "content": [{"type": "text", "text":
      "I apologize for the confusion earlier. It looks like \"The Great Gatsby\" is
      indeed available, but the function is case-sensitive. Let me try reading the
      book again with the correct capitalization."}], "function_call": {"name": "read_book",
      "arguments": "{\"book_name\": \"The Great Gatsby\"}"}}, {"role": "function",
      "content": [{"type": "text", "text": "Lorem ipsum dolor sit amet, consectetur
      adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna
      aliqua."}], "name": "read_book"}, {"role": "assistant", "content": [{"type":
      "text", "text": "I have successfully retrieved the content of \"The Great Gatsby\"
      for you. However, it appears that the actual text of the book is not available,
      and instead, we have received a placeholder text in Latin. This is likely due
      to copyright restrictions or limitations in the current system.\n\nThe placeholder
      text translates to: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit.
      Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\" Which roughly
      means: \"Pain itself is love, the main storage system. But they do it in time,
      falling into some great pain and labor.\"\n\nI apologize that I cannot provide
      you with the actual content of \"The Great Gatsby.\" If you''d like, I can tell
      you about the book or we can try reading another book from the available list.
      Would you like to know more about \"The Great Gatsby\" or try another book?"}]},
      {"role": "user", "content": [{"type": "text", "text": "Hello, read book ''the
      great gatsby''"}]}], "model": "gpt-4o", "functions": [{"name": "list_books",
      "description": null, "parameters": {"properties": {}, "title": "Input for `list_books`",
      "type": "object"}}, {"name": "read_book", "description": null, "parameters":
      {"properties": {"book_name": {"title": "Book Name", "type": "string"}}, "required":
      ["book_name"], "title": "Input for `read_book`", "type": "object"}}]}'
    headers:
      content-type:
      - application/json
      host:
      - api.openai.com
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAAwAAAP//jFLLbtswELzrKxZ7jgJZsRRHtwJFU/RYBGmCOhBoaiXRpkiWpIoYhv+9
        oOxYUtICvfDAeWB2dg8RAIoKC0DeMs87I+NP29u75z3/1v9+fexot338/vzl6+dfyY8H/ZThVVDo
        zZa4f1Ndc90ZSV5odYK5JeYpuC5ub7KbRZanyQB0uiIZZI3x8VLHaZIu42QVJ/lZ2GrByWEBPyMA
        gMPwhoiqolcsYLAZfjpyjjWExYUEgFbL8IPMOeE8Ux6vRpBr5UmF1KqXcgLUveIhfMmZlDNDAFSs
        GywtsarcaL2bWAIgs03fkfIhMx7WGBhl0KyxWONDS3AfyoB75t1mv8YjXtTHSQRLde+YPGeL3hFQ
        6sZYvXHvsmMtlHBtaYk5rUKC+SgD7RgBvAzt9rPC0FjdGV96vSMVnLM8PRnjuM8RXazOoNeeyYlq
        dd7J3K+syDMh3aRO5Iy3VI3ScZmsr4SeANFk/I9p/uZ9qkCo5n/sR4BzMp6q0liqBJ9PPNIshXP/
        F+3S8hAY3d556spaqIassWK4OKxNmdVpkudptrzD6Bj9AQAA//8DAFbVG0t6AwAA
    headers:
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      X-Content-Type-Options:
      - nosniff
      access-control-expose-headers:
      - X-Request-ID
      alt-svc:
      - h3=":443"; ma=86400
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
    status:
      code: 200
      message: OK
- request:
    body: '{"messages": [{"role": "system", "content": [{"type": "text", "text": "You
      are a helpful assistant that can read books."}]}, {"role": "user", "content":
      [{"type": "text", "text": "Hello, read book ''the great gatsby''"}]}, {"role":
      "assistant", "content": [{"type": "text", "text": "Certainly! I''d be happy
      to read \"The Great Gatsby\" for you. To do this, I''ll use the `read_book`
      function. Let me retrieve the contents of the book for you."}], "function_call":
      {"name": "read_book", "arguments": "{\"book_name\": \"the great gatsby\"}"}},
      {"role": "function", "content": [{"type": "text", "text": "Traceback (most recent
      call last):\n  File \"/Users/smileos/Workspaces/autochat/tests/test_calls.py\",
      line 17, in read_book\n    return BOOKS[book_name]\n           ~~~~~^^^^^^^^^^^\n\nKeyError:
      ''the great gatsby''"}], "name": "read_book"}, {"role": "assistant", "content":
      [{"type": "text", "text": "I apologize for the error. It seems that the book
      \"The Great Gatsby\" is not available in the current library of books that I
      can access. Let me check what books are available using the `list_books` function."}],
      "function_call": {"name": "list_books", "arguments": "{}"}}, {"role": "function",
      "content": [{"type": "text", "text": "The Great Gatsby\nTo Kill a Mockingbird\n1984"}],
      "name": "list_books"}, {"role": "assistant", "content": [{"type": "text", "text":
      "I apologize for the confusion earlier. It looks like \"The Great Gatsby\" is
      indeed available, but the function is case-sensitive. Let me try reading the
      book again with the correct capitalization."}], "function_call": {"name": "read_book",
      "arguments": "{\"book_name\": \"The Great Gatsby\"}"}}, {"role": "function",
      "content": [{"type": "text", "text": "Lorem ipsum dolor sit amet, consectetur
      adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna
      aliqua."}], "name": "read_book"}, {"role": "assistant", "content": [{"type":
      "text", "text": "I have successfully retrieved the content of \"The Great Gatsby\"
      for you. However, it appears that the actual text of the book is not available,
      and instead, we have received a placeholder text in Latin. This is likely due
      to copyright restrictions or limitations in the current system.\n\nThe placeholder
      text translates to: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit.
      Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\" Which roughly
      means: \"Pain itself is love, the main storage system. But they do it in time,
      falling into some great pain and labor.\"\n\nI apologize that I cannot provide
      you with the actual content of \"The Great Gatsby.\" If you''d like, I can tell
      you about the book or we can try reading another book from the available list.
      Would you like to know more about \"The Great Gatsby\" or try another book?"}]},
      {"role": "user", "content": [{"type": "text", "text": "Hello, read book ''the
      great gatsby''"}]}, {"role": "assistant", "content": [], "function_call": {"name":
      "read_book", "arguments": "{\"book_name\": \"The Great Gatsby\"}"}}, {"role":
      "function", "content": [{"type": "text", "text": "Lorem ipsum dolor sit amet,
      consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore
      magna aliqua."}], "name": "read_book"}], "model": "gpt-4o", "functions": [{"name":
      "list_books", "description": null, "parameters": {"properties": {}, "title":
      "Input for `list_books`", "type": "object"}}, {"name": "read_book", "description":
      null, "parameters": {"properties": {"book_name": {"title": "Book Name", "type":
      "string"}}, "required": ["book_name"], "title": "Input for `read_book`", "type":
      "object"}}]}'
    headers:
      content-type:
      - application/json
      host:
      - api.openai.com
    method: POST
    uri: https://api.openai.com/v1/chat/completions
  response:
    body:
      string: !!binary |
        H4sIAAAAAAAAA4xTwW4aMRC98xVTX3KBaCEBCreqB6CnHKoeWipk7FnWYHtcezZkG+XfKy8ENmoj
        9bLSzpv39r2Z2ecegDBazEGoSrJywQ4+7aez7/tv+0Xxu+HPT4flryPWjfuyXMweHkU/M2i7R8Wv
        rFtFLlhkQ/4Eq4iSMasOp3fju+F4Mhq2gCONNtN2gQf3NBgVo/tB8XFQTM7EiozCJObwowcA8Nw+
        s0Wv8UnMoei/VhymJHco5pcmABHJ5oqQKZnE0rPoX0FFntG3rlcMCdEl4EoyrG4c1F5uLQITSKUw
        ZQRBKq6lBcYnBiphLb5WCIscDhaS07ZZC5Dctjpy6LkP0uv2/fwxiMh19KjBJAhWKqzIaoyt5u3a
        r/2SjviIsQ8rUNJDiPRoNEJDNRwNVyAh1c7J2ABFkF7aJpn0rhtTZuaNBmsOeAsPFmVCsMjgEA6e
        jlDRsdOSA4dIClF/6M4qYlknmVfla2vP9ZfL8C3tQqRtOuOXemm8SdUmokzk86ATUxAt+tID+Nku
        uX6zNxEiucAbpgP6LDgpZic9cT2rDjo8g0wsbac+PZ/GW72NRpbGps6ZCCVVhfpKvd6UrLWhDtDr
        pP7bzb+0T8mN3/2P/BVQCgOj3oSI2qi3ia9tEfNf917bZcqtYZGaxOg2pfE7jCGa0+GXYTMuR8Vk
        Mhrfz0TvpfcHAAD//wMAxtOomwEEAAA=
    headers:
      Connection:
      - keep-alive
      Content-Encoding:
      - gzip
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      X-Content-Type-Options:
      - nosniff
      access-control-expose-headers:
      - X-Request-ID
      alt-svc:
      - h3=":443"; ma=86400
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
    status:
      code: 200
      message: OK
version: 1
